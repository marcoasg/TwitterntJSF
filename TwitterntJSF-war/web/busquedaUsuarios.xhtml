<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:form>
        Busque un usuario:<br/>
        <h:inputText value="#{busquedaUsuariosBean.pattern}" class="form-control">
            <f:ajax event="keyup" listener="#{busquedaUsuariosBean.doBusqueda()}"
                    render="resultadoBusqueda"/>
        </h:inputText>
    </h:form>
    <h:dataTable id="resultadoBusqueda" value="#{busquedaUsuariosBean.resultadoBusqueda}" var="usuario">
        <h:column>
            <h:form>
                <h:commandLink action="#{loginBean.doSeleccionarUsuario(usuario)}" class="btn btn-link">
                    #{usuario.nombre}&nbsp;#{usuario.apellidos}&nbsp;(@#{usuario.nombreUsuario})
                    <f:setPropertyActionListener value="#{usuario}"
                                                 target="#{perfilBean.usuario}"/>
                </h:commandLink>
            </h:form>
        </h:column>
    </h:dataTable>

</ui:composition>

